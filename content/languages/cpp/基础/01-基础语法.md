---
title: "基础语法"
weight: 1
---

## 编译器

- GNU C++
- LLVM Clang++
- Visual Studio C++

## 系统

- Windows
- MacOS
- Linux

## 集成开发环境（IDE）

- Visual Studio （Windows）
- CLion （全平台）
- XCode （MacOS）

## 编辑器

- vim
- vscode
- 各种 AI 编辑器（在 vscode 上修改的）

## docker

容器可以使代码在相同的环境下都能正确运行。

```bash
docker run --platform linux/amd64 --rm -it -v "(pwd)":/usr/src gcc:latest
```

## hello world

```cpp
#include <iostream>  //引入头文件

int main() { // C++程序入口（main 函数）， int 为返回类型
    std::cout << "Hello World!" << std::endl;  //标准输出，语句，以分号结尾。
    return 0; //返回值
}
```

## 注释

```cpp
// 单行注释
/*
  多行注释
*/
```

## 转义字符

| 转义字符 | 说明 |
| :-: | :-: |
| `\n` | 换行符 |
| `\t` | 制表符|
| `\r` | 回车符|
| `\a` | 警告字符|
| `\\` | 反斜杠字符|
| `\'` | 单引号字符|
| `\"` | 双引号字符|

## 运算符

整型类型、加号运算符示例：

```cpp
#include <iostream>

int main() {
   int number1{0}; // 列表初始化为 0，不初始化可能是个随机值， int 类型为整型变量
   int number2{0};
   int sum{0};

   std::cout << "Enter first integer: ";
   std::cin >> number1; // 标准输入 std::cin ，变量必须提前定义才能使用

   std::cout << "Enter second integer: ";
   std::cin >> number2;

   sum = number1 + number2; //右侧求和的结果赋值给左侧变量。

   std::cout << "Sum is " << sum << "\n";// \n 换行
} 
```

### C++算术运算符对应表

| 操作       | 算术运算符 | C++表达式 |
|------------|------------|-----------|
| 加法       | +          | f + 7     |
| 减法       | -          | p - c     |
| 乘法       | *          | b * m     |
| 除法       | /          | x / y     |
| 取余（求模）| %          | r % s     |

### 复合赋值运算符

| 运算符 | 示例表达式 | 说明 | 赋值结果 |
|--------|--------|-------|--------|
| `+=`   | `c += 7` | `c = c + 7`| c + 7 to c|
| `-=`   | `d -= 4` | `d = d - 4`| d - 4 to d |
| `*=`   | `e *= 5` | `e = e * 5` | e * 5 to e |
| `/=`   | `f /= 3` | `f = f / 3` | f / 3 to f |
| `%=`   | `g %= 9` | `g = g % 9` | g % 9 to g |

### 相等性与关系运算符表

| **关系运算符** | C++ 运算符 | 示例条件 | 含义 |
|------------|------------|----------|------|
| > | > | x > y | x 大于 y |
| < | < | x < y | x 小于 y |
| ≥ | >= | x >= y | x 大于等于 y |
| ≤ | <= | x <= y | x 小于等于 y |

| **相等性运算符** | C++ 运算符 | 示例条件 | 含义 |
|------------|------------|----------|------|
| = | == | x == y | x 等于 y |
| ≠ | != | x != y | x 不等于 y |

### 自增/自减运算符

| 运算符 | 运算符名称 | 示例表达式 | 说明 |
|-------|----------|----------|------|
| `++`  | 前缀自增  | `++number` | 先将 `number` 加 1，再在当前表达式中使用 `number` 的新值。 |
| `++`  | 后缀自增  | `number++` | 先在当前表达式中使用 `number` 的当前值，再将 `number` 加 1 |
| `--`  | 前缀自减 | `--number` | 先将 `number` 减 1，再在当前表达式中使用 `number` 的新值|
| `--`  | 后缀自减 | `number--` | 先在当前表达式中使用 `number` 的当前值，再将 `number` 减 1 |

运算符简单使用

比较运算符示例：

```cpp
#include <iostream> // 引入头文件

using std::cout; // using 整个文件使用std namespace下的 cout，不用每次都写std::
using std::cin;

int main() {
   int number1{0};
   int number2{0};
   
   cout << "Enter two integers to compare: ";
   cin >> number1 >> number2;

   if (number1 == number2) { // if 判断， == 相等
      cout << number1 << " == " << number2 << "\n";
   }

   if (number1 != number2) { // != 不等
      cout << number1 << " != " << number2 << "\n";
   }

   if (number1 < number2) { // < 小于
      cout << number1 << " < " << number2 << "\n";
   }

   if (number1 > number2) { // > 大于
      cout << number1 << " > " << number2 << "\n";
   }

   if (number1 <= number2) { // <= 小于等于
      cout << number1 << " <= " << number2 << "\n";
   }

   if (number1 >= number2) { // >= 大于等于
      cout << number1 << " >= " << number2 << "\n";
   }
}
```

自增自减示例：

```cpp
#include <iostream>
using namespace std;

int main() {
   int c{5}; 
   cout << "c before postincrement: " << c << "\n"; // prints 5
   cout << "    postincrementing c: " << c++ << "\n"; // prints 5
   cout << " c after postincrement: " << c << "\n"; // prints 6                     

   cout << "\n";

   c = 5;  
   cout << " c before preincrement: " << c << "\n"; // prints 5
   cout << "  preincrementing c: " << ++c << "\n"; // prints 6
   cout << " c after preincrement: " << c << "\n"; // prints 6                     
}
```

### 三目运算符

```cpp
1 == 1 ? true : false; // (expr) ? 正确 ： 错误
```

### 赋值

列表初始化，可以防止窄化转换，等号赋值会隐式转换

```cpp
int a{12.7}; //会编译报错
int a = 12.7; //会隐式转换
```

### 逻辑运算符

```cpp
#include <format>
#include <iostream>
using namespace std;

int main() {
   // &&
   cout << "Logical AND (&&)\n"
      << format("false && false: {}\n", false && false)
      << format("false && true: {}\n", false && true)
      << format("true && false: {}\n", true && false)
      << format("true && true: {}\n\n", true && true); // format 格式化不需要 boolalpha 自动就会显示文本，对于真假。

   // ||
   cout << "Logical OR (||)\n"
      << format("false || false: {}\n", false || false)
      << format("false || true: {}\n", false || true)
      << format("true || false: {}\n", true || false)
      << format("true || true: {}\n\n", true || true);

   // !
   cout << "Logical negation (!)\n"
      << format("!false: {}\n", !false)
      << format("!true: {}\n", !true);
} 
```

#### &&

| expression1 | expression2 | expression1 && expression2 |
|-------------|-------------|-----------------------------|
| false       | false       | false                       |
| false       | true        | false                       |
| true        | false       | false                       |
| true        | true        | true                        |

#### ||

| expression1 | expression2 | expression1 \|\| expression2 |
|-------------|-------------|------------------------------|
| false       | false       | false                        |
| false       | true        | true                         |
| true        | false       | true                         |
| true        | true        | true                         |

短路效应：如果表达式 1 为 true ，则不需要运行表达式 2 的判断。

#### !

| expression1 | !expression1 | 
|-------------|--------------|
| !false      | true         |
| !true       | false        |

## 关键字

### C和C++共有的关键字

| 关键字列表 |
|------------|
| asm、auto、break、case、char |
| const、continue、default、do、double |
| else、enum、extern、float、for |
| goto、if、inline、int、long |
| register、return、short、signed、sizeof |
| static、struct、switch、typedef、union |
| unsigned、void、volatile、while |

### C++独有的关键字

| 关键字列表 |
|------------|
| alignas、alignof、and、and_eq、bitand |
| bitor、bool、catch、char16_t、char32_t |
| class、compl、const_cast、constexpr、decltype |
| delete、dynamic_cast、explicit、export、false |
| friend、mutable、namespace、new、noexcept |
| not、not_eq、nullptr、operator、or |
| or_eq、private、protected、public、reinterpret_cast |
| static_assert、static_cast、template、this、thread_local |
| throw、true、try、typeid、typename |
| using、virtual、wchar_t、xor、xor_eq |

### C++20新增关键字及特殊标识符

#### C++20 关键字

```markdown
char8_t、concept、char16_t、consteval、constinit、co_await、co_return、co_yield、requires
```

#### 其他特殊标识符
- 具有特殊含义的标识符：

```markdown
  final、import、module、override、transaction_safe、transaction_safe_dynamic
```

- 实验性关键字：

```markdown
  atomic_cancel、atomic_commit、atomic_noexcept、reflexpr、synchronized
```

## 条件判断

### if else

```cpp
if (expr) {

}
```

```cpp
if (expr) {

} else {

}
```

```cpp
if (expr) {

} else if (expr) {

} else if (expr) {

} else if (expr) {

} else {

}
```

### switch case

```cpp
#include <format>
#include <iostream>
using namespace std;

int main() {
   double total{0.0};                 
   int gradeCounter{0};
   int aCount{0};
   int bCount{0};             
   int cCount{0};             
   int dCount{0};             
   int fCount{0};             

   cout << "Enter the integer grades in the range 0-100.\n"
      << "Type the end-of-file indicator to terminate input:\n"
      << "   On UNIX/Linux/macOS type <Ctrl> d then press Enter\n"
      << "   On Windows type <Ctrl> z then press Enter\n";

   int grade;

   while (cin >> grade) { 
      total += grade;
      ++gradeCounter;
      
      switch (grade / 10) {                        
         case 9:      
         case 10:          
            ++aCount;                              
            break;          
                                                   
         case 8:    
            ++bCount;                              
            break;               
                                                   
         case 7:    
            ++cCount;                              
            break;               
                                                   
         case 6:    
            ++dCount;                              
            break;              
                                                   
         default:       
            ++fCount;                              
            break;
      } // end switch                              
   } // end while 

   cout << "\nGrade Report:\n";

   if (gradeCounter != 0) {
      double average{total / gradeCounter};

      cout << format("Total of the {} grades entered is {}\n", 
                 gradeCounter, total)
           << format("Class average is {:.2f}\n\n", average)  
           << "Summary of student's grades:\n"
           << format("A: {}\nB: {}\nC: {}\nD: {}\nF: {}\n",
                 aCount, bCount, cCount, dCount, fCount); 
   } 
   else {
      cout << "No grades were entered\n";
   }
}
```

[[fallthrough]] 属性（C++17 引入），它是专门用于 switch 语句中明确标识 “穿透” 行为的标准化语法，核心作用是消除编译器的穿透警告、提升代码可读性。

```cpp
#include <iostream>
using namespace std;

int main() {
    int num = 1;
    switch (num) {
        case 1:
            cout << "处理case 1的前置逻辑\n";
            [[fallthrough]]; // 显式声明穿透（无警告）
        case 2:
            cout << "处理case 1和case 2的通用逻辑\n";
            break; // 终止穿透
        case 3:
            cout << "处理case 3\n";
            // 无break，也无fallthrough → 编译器会报穿透警告
        default:
            cout << "处理默认情况\n";
    }
    return 0;
}
```

## 循环

### while 循环

```cpp
while(expr) {

}
```

示例 1：while循环

```cpp
#include <iostream>
using namespace std;

int main() {
   int total{0}; // 初始化
   int gradeCounter{1}; 

   while (gradeCounter <= 10) { // while 循环 10 次
      cout << "Enter grade: "; 
      int grade;
      cin >> grade; // 输入 grade
      total = total + grade; // 加 grade 到 total
      gradeCounter = gradeCounter + 1; // gradeCounter 次数加 1
   } 

   int average{total / 10}; // 求平均

   cout << "\nTotal of all 10 grades is " << total;
   cout << "\nClass average is " << average << "\n";
} 
```

示例2: while + if else

```cpp
#include <iostream>
#include <iomanip> // 输出流格式化相关头文件 
using namespace std;

int main() {
   double total{0.0}; // 初始化 double 类型变量，浮点数为近似表示
   int gradeCounter{0}; // 初始化整数类型
   
   cout << "Enter grade or -1 to quit: "; 
   int grade; 
   cin >> grade; 

   while (grade != -1) {
      total = total + grade; // add grade to total
      gradeCounter = gradeCounter + 1; // 计数

      cout << "Enter grade or -1 to quit: "; 
      cin >> grade; 
   }

   if (gradeCounter != 0) { // 除数非0
      double average{total / gradeCounter}; //转换为浮点数 double 类型

      cout << "\nTotal of the " << gradeCounter << " grades entered is " << total;
      cout << setprecision(2) << fixed; //定点表示法显示浮点数
      cout << "\nClass average is " << average << "\n"; 
   } 
   else {
      cout << "No grades were entered\n"; 
   }
} 
```
示例3: while + if else 嵌套

```cpp
#include <iostream>
using namespace std;

int main() {
   int passes{0};
   int failures{0};
   int studentCounter{1}; 

   while (studentCounter <= 10) {
      cout << "Enter result (1 = pass, 2 = fail): ";
      int result;
      cin >> result;

      if (result == 1) {         
         passes = passes + 1;  
      }
      else {    
         failures = failures + 1; 
      }

      studentCounter = studentCounter + 1;  
   } 

   cout << "Passed: " << passes << "\nFailed: " << failures << "\n";

   if (passes > 8) {
      cout << "Bonus to instructor!\n";
   }
} 
```

计数

```cpp
#include <iostream>
using namespace std;

int main() {      
   int counter{1}; // 列表初始化

   while (counter <= 10) { // 循环条件
      cout << counter << "  ";
      ++counter; // 自增
   } 

   cout << "\n"; 
} 
```

### for 循环

计数

```cpp
#include <iostream>
using namespace std;

int main() {
   // for 迭代，初始化表达式；条件表达式；递增表达式
   for (int counter{1}; counter <= 10; ++counter) { 
      cout << counter << "  ";
   }

   cout << "\n";
}
```

```cpp
#include <format> 
#include <iostream>
using namespace std;

int main() {
   int total{0};

   // 每次步长 2 ，计数20内的偶数和
   for (int number{2}; number <= 20; number += 2) {
      total += number;                             
   }

   // c++20 的format 方式，格式字面量，{} 用于占位符，被后面变量替换。
   cout << format("Sum is {}\n", total);
} 
```

### do while 循环

```cpp
#include <iostream>
using namespace std;

int main() {
   int counter{1}; 

   do {
      cout << counter << "  ";
      ++counter;
   } while (counter <= 10); // end do...while 

   cout << "\n"; 
} 
```

### break

- 跳出本次循环。
- 跳出 switch（示例见 switch case 章节）。

```cpp
#include <iostream>
using namespace std;

int main() {
   int count;
   
   for (count = 1; count <= 10; ++count) {
      if (count == 5) {
         break; // 跳出循环
      }

      cout << count << " ";
   }

   cout << "\nBroke out of loop at count = " << count << "\n";
} 
```

### continue

跳过后面的内容，进入下一个循环。

```cpp
#include <iostream>
using namespace std;

int main() {
   for (int count{1}; count <= 10; ++count) {
      if (count == 5) {
         continue; // 进入下个循环
      }

      cout << count << " ";
   } 

   cout << "\nUsed continue to skip printing 5\n";
}
```
